<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link href="../style/style.css" rel="stylesheet" />
  <link href="../style/main.css" rel="stylesheet" />
  <title>아웃소싱 프로젝트</title>
</head>

<body>
  <div class="header">
    <!-- 프로필 편집 버튼 -->
    <div class="profile-edit-button">
      <button class="btn btn-outline-dark" id="profile">프로필 편집</button>
    </div>
    <!-- 헤더 -->
    <header class="text-center my-5">
      <h1>예약 상세 조회</h1>
    </header>
  </div>
  <div class="container">
    <!-- 글쓰기 버튼 -->
    <div class="write-button">
      <button class="btn btn-outline-dark" id="newBooking">예약하기</button>
    </div>
    <!-- 사진과 제목 -->
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <!--<img src="/images/winter.png" class="img-fluid" alt="블로그 이미지" />-->
        <h2 class="my-3">게시글 제목</h2>
      </div>
    </div>

    <!-- 게시글 목록 테이블 -->
    <table class="table mt-4">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">제목</th>
          <th scope="col">작성일</th>
        </tr>
      </thead>
      <tbody id="bookingTableBody">
        <!-- <tr>
          <th scope=" row">1</th>
          <td><a href="post1.html">첫 번째 게시물</a></td>
          <td>2023-01-01</td>
        </tr>
        <tr>
          <th scope="row">2</th>
          <td><a href="post2.html">두 번째 게시물</a></td>
          <td>2023-02-01</td>
        </tr> -->
        <!-- 추가 게시글은 이어서 작성 -->
      </tbody>
    </table>
  </div>

  <script>



    $(document).ready(function () {
      function loadBookingList() {
        $.ajax({
          url: "http://localhost:4002/api/booking/",
          type: "GET",
          success: function (response) {
            if (response.success) {
              displayBookings(response.data.formattedBookings);
            } else {
              alert("예약 목록 조회에 실패했습니다.");
            }
          },
          error: function () {
            alert("예약 목록 조회에 실패했습니다.");
          }
        });
      }
      function displayBookings(bookings) {
        var tableBody = $("#bookingTableBody");
        tableBody.empty();

        for (var i = 0; i < bookings.length; i++) {
          var booking = bookings[i];
          var row = "<tr>" +
            "<th scope='row'>" + (i + 1) + "</th>"
            + "<td><a href='post" + booking.bookingId
            + ".html'>" + booking.title + "</a></td>"
            + "<td>" + booking.createdAt + "</td>"
            + "</tr>";
          tableBody.append(row);
        }
      }

      // 페이지 로드 시 예약 목록 불러오기
      loadBookingList();

    });

    // 프로필 편집 버튼
    document.getElementById("profile").addEventListener("click", function () {
      location.href = "profile.html";
    });

    // 예약하기 버튼
    document.getElementById("newBooking").addEventListener("click", function () {
      location.href = "bookingDetail.html";
    });

  </script>

</body>

</html>